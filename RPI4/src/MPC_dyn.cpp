#include "MPC.hpp"
Eigen::Matrix<double, 2, 1> MPC::UpdateF(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[0] - p_l[0];
    double x1 = u[0] * x0;
    double x2 = p_h[20] - p_l[20];
    double x3 = u[20] * x2;
    double x4 = p_h[21] - p_l[21];
    double x5 = u[21] * x4;
    double x6 = p_h[2] - p_l[2];
    double x7 = u[2] * x6;
    double x8 = p_h[22] - p_l[22];
    double x9 = u[22] * x8;
    double x10 = p_h[23] - p_l[23];
    double x11 = u[23] * x10;
    double x12 = p_h[24] - p_l[24];
    double x13 = u[24] * x12;
    double x14 = p_h[3] - p_l[3];
    double x15 = u[3] * x14;
    double x16 = p_h[4] - p_l[4];
    double x17 = u[4] * x16;
    double x18 = p_h[5] - p_l[5];
    double x19 = u[5] * x18;
    double x20 = p_h[6] - p_l[6];
    double x21 = u[6] * x20;
    double x22 = p_h[7] - p_l[7];
    double x23 = u[7] * x22;
    double x24 = p_h[8] - p_l[8];
    double x25 = u[8] * x24;
    double x26 = p_h[9] - p_l[9];
    double x27 = u[9] * x26;
    double x28 = p_h[10] - p_l[10];
    double x29 = u[10] * x28;
    double x30 = p_h[11] - p_l[11];
    double x31 = u[11] * x30;
    double x32 = p_h[1] - p_l[1];
    double x33 = u[1] * x32;
    double x34 = p_h[12] - p_l[12];
    double x35 = u[12] * x34;
    double x36 = p_h[13] - p_l[13];
    double x37 = u[13] * x36;
    double x38 = p_h[14] - p_l[14];
    double x39 = u[14] * x38;
    double x40 = p_h[15] - p_l[15];
    double x41 = u[15] * x40;
    double x42 = p_h[16] - p_l[16];
    double x43 = u[16] * x42;
    double x44 = p_h[17] - p_l[17];
    double x45 = u[17] * x44;
    double x46 = p_h[18] - p_l[18];
    double x47 = u[18] * x46;
    double x48 = p_h[19] - p_l[19];
    double x49 = u[19] * x48;
    double x50 = -p_l[20] / p_h[20];
    double x51 = pow(x50 + 1, 2);
    double x52 = x3 * pow(x51, 1.0 / 4.0);
    double x53 = -p_l[21] / p_h[21];
    double x54 = pow(x53 + 1, 2);
    double x55 = x5 * pow(x54, 1.0 / 4.0);
    double x56 = -p_l[22] / p_h[22];
    double x57 = pow(x56 + 1, 2);
    double x58 = pow(x57, 1.0 / 4.0) * x9;
    double x59 = -p_l[23] / p_h[23];
    double x60 = pow(x59 + 1, 2);
    double x61 = x11 * pow(x60, 1.0 / 4.0);
    double x62 = -p_l[2] / p_h[2];
    double x63 = pow(x62 + 1, 2);
    double x64 = pow(x63, 1.0 / 4.0) * x7;
    double x65 = -p_l[24] / p_h[24];
    double x66 = pow(x65 + 1, 2);
    double x67 = x13 * pow(x66, 1.0 / 4.0);
    double x68 = -p_l[3] / p_h[3];
    double x69 = pow(x68 + 1, 2);
    double x70 = x15 * pow(x69, 1.0 / 4.0);
    double x71 = -p_l[0] / p_h[0];
    double x72 = pow(x71 + 1, 2);
    double x73 = x1 * pow(x72, 1.0 / 4.0);
    double x74 = -p_l[4] / p_h[4];
    double x75 = pow(x74 + 1, 2);
    double x76 = x17 * pow(x75, 1.0 / 4.0);
    double x77 = -p_l[5] / p_h[5];
    double x78 = pow(x77 + 1, 2);
    double x79 = x19 * pow(x78, 1.0 / 4.0);
    double x80 = -p_l[6] / p_h[6];
    double x81 = pow(x80 + 1, 2);
    double x82 = x21 * pow(x81, 1.0 / 4.0);
    double x83 = -p_l[7] / p_h[7];
    double x84 = pow(x83 + 1, 2);
    double x85 = x23 * pow(x84, 1.0 / 4.0);
    double x86 = -p_l[8] / p_h[8];
    double x87 = pow(x86 + 1, 2);
    double x88 = x25 * pow(x87, 1.0 / 4.0);
    double x89 = -p_l[9] / p_h[9];
    double x90 = pow(x89 + 1, 2);
    double x91 = x27 * pow(x90, 1.0 / 4.0);
    double x92 = -p_l[10] / p_h[10];
    double x93 = pow(x92 + 1, 2);
    double x94 = x29 * pow(x93, 1.0 / 4.0);
    double x95 = -p_l[11] / p_h[11];
    double x96 = pow(x95 + 1, 2);
    double x97 = x31 * pow(x96, 1.0 / 4.0);
    double x98 = -p_l[12] / p_h[12];
    double x99 = pow(x98 + 1, 2);
    double x100 = x35 * pow(x99, 1.0 / 4.0);
    double x101 = -p_l[13] / p_h[13];
    double x102 = pow(x101 + 1, 2);
    double x103 = pow(x102, 1.0 / 4.0) * x37;
    double x104 = -p_l[1] / p_h[1];
    double x105 = pow(x104 + 1, 2);
    double x106 = pow(x105, 1.0 / 4.0) * x33;
    double x107 = -p_l[14] / p_h[14];
    double x108 = pow(x107 + 1, 2);
    double x109 = pow(x108, 1.0 / 4.0) * x39;
    double x110 = -p_l[15] / p_h[15];
    double x111 = pow(x110 + 1, 2);
    double x112 = pow(x111, 1.0 / 4.0) * x41;
    double x113 = -p_l[16] / p_h[16];
    double x114 = pow(x113 + 1, 2);
    double x115 = pow(x114, 1.0 / 4.0) * x43;
    double x116 = -p_l[17] / p_h[17];
    double x117 = pow(x116 + 1, 2);
    double x118 = pow(x117, 1.0 / 4.0) * x45;
    double x119 = -p_l[18] / p_h[18];
    double x120 = pow(x119 + 1, 2);
    double x121 = pow(x120, 1.0 / 4.0) * x47;
    double x122 = -p_l[19] / p_h[19];
    double x123 = pow(x122 + 1, 2);
    double x124 = pow(x123, 1.0 / 4.0) * x49;
    double x125 = pow(u[20], 2);
    double x126 = x125 * pow(x2, 2) * x51;
    double x127 = pow(u[21], 2);
    double x128 = x127 * pow(x4, 2) * x54;
    double x129 = pow(u[22], 2);
    double x130 = x129 * x57 * pow(x8, 2);
    double x131 = pow(u[23], 2);
    double x132 = pow(x10, 2) * x131 * x60;
    double x133 = pow(u[24], 2);
    double x134 = pow(x12, 2) * x133 * x66;
    double x135 = pow(u[2], 2);
    double x136 = x135 * pow(x6, 2) * x63;
    double x137 = pow(u[3], 2);
    double x138 = x137 * pow(x14, 2) * x69;
    double x139 = pow(u[4], 2);
    double x140 = x139 * pow(x16, 2) * x75;
    double x141 = pow(u[5], 2);
    double x142 = x141 * pow(x18, 2) * x78;
    double x143 = pow(u[0], 2);
    double x144 = pow(x0, 2) * x143 * x72;
    double x145 = pow(u[6], 2);
    double x146 = x145 * pow(x20, 2) * x81;
    double x147 = pow(u[7], 2);
    double x148 = x147 * pow(x22, 2) * x84;
    double x149 = pow(u[8], 2);
    double x150 = x149 * pow(x24, 2) * x87;
    double x151 = pow(u[9], 2);
    double x152 = x151 * pow(x26, 2) * x90;
    double x153 = pow(u[10], 2);
    double x154 = x153 * pow(x28, 2) * x93;
    double x155 = pow(u[11], 2);
    double x156 = x155 * pow(x30, 2) * x96;
    double x157 = pow(u[12], 2);
    double x158 = x157 * pow(x34, 2) * x99;
    double x159 = pow(u[13], 2);
    double x160 = x102 * x159 * pow(x36, 2);
    double x161 = pow(u[14], 2);
    double x162 = x108 * x161 * pow(x38, 2);
    double x163 = pow(u[15], 2);
    double x164 = x111 * x163 * pow(x40, 2);
    double x165 = pow(u[1], 2);
    double x166 = x105 * x165 * pow(x32, 2);
    double x167 = pow(u[16], 2);
    double x168 = x114 * x167 * pow(x42, 2);
    double x169 = pow(u[17], 2);
    double x170 = x117 * x169 * pow(x44, 2);
    double x171 = pow(u[18], 2);
    double x172 = x120 * x171 * pow(x46, 2);
    double x173 = pow(u[19], 2);
    double x174 = x123 * x173 * pow(x48, 2);
    double x175 = pow(pow(0.996004 - pow(-x50 - 0.002, 2), 2), 1.0 / 4.0);
    double x176 = x175 * x3;
    double x177 = pow(pow(0.996004 - pow(-x53 - 0.002, 2), 2), 1.0 / 4.0);
    double x178 = x177 * x5;
    double x179 = pow(pow(0.996004 - pow(-x56 - 0.002, 2), 2), 1.0 / 4.0);
    double x180 = x179 * x9;
    double x181 = pow(pow(0.996004 - pow(-x59 - 0.002, 2), 2), 1.0 / 4.0);
    double x182 = x11 * x181;
    double x183 = pow(pow(0.996004 - pow(-x65 - 0.002, 2), 2), 1.0 / 4.0);
    double x184 = x13 * x183;
    double x185 = pow(pow(0.996004 - pow(-x62 - 0.002, 2), 2), 1.0 / 4.0);
    double x186 = x185 * x7;
    double x187 = pow(pow(0.996004 - pow(-x68 - 0.002, 2), 2), 1.0 / 4.0);
    double x188 = x15 * x187;
    double x189 = pow(pow(0.996004 - pow(-x74 - 0.002, 2), 2), 1.0 / 4.0);
    double x190 = x17 * x189;
    double x191 = pow(pow(0.996004 - pow(-x77 - 0.002, 2), 2), 1.0 / 4.0);
    double x192 = x19 * x191;
    double x193 = pow(pow(0.996004 - pow(-x80 - 0.002, 2), 2), 1.0 / 4.0);
    double x194 = x193 * x21;
    double x195 = pow(pow(0.996004 - pow(-x83 - 0.002, 2), 2), 1.0 / 4.0);
    double x196 = x195 * x23;
    double x197 = pow(pow(0.996004 - pow(-x71 - 0.002, 2), 2), 1.0 / 4.0);
    double x198 = x1 * x197;
    double x199 = pow(pow(0.996004 - pow(-x86 - 0.002, 2), 2), 1.0 / 4.0);
    double x200 = x199 * x25;
    double x201 = pow(pow(0.996004 - pow(-x89 - 0.002, 2), 2), 1.0 / 4.0);
    double x202 = x201 * x27;
    double x203 = pow(pow(0.996004 - pow(-x92 - 0.002, 2), 2), 1.0 / 4.0);
    double x204 = x203 * x29;
    double x205 = pow(pow(0.996004 - pow(-x95 - 0.002, 2), 2), 1.0 / 4.0);
    double x206 = x205 * x31;
    double x207 = pow(pow(0.996004 - pow(-x98 - 0.002, 2), 2), 1.0 / 4.0);
    double x208 = x207 * x35;
    double x209 = pow(pow(0.996004 - pow(-x101 - 0.002, 2), 2), 1.0 / 4.0);
    double x210 = x209 * x37;
    double x211 = pow(pow(0.996004 - pow(-x107 - 0.002, 2), 2), 1.0 / 4.0);
    double x212 = x211 * x39;
    double x213 = pow(pow(0.996004 - pow(-x110 - 0.002, 2), 2), 1.0 / 4.0);
    double x214 = x213 * x41;
    double x215 = pow(pow(0.996004 - pow(-x113 - 0.002, 2), 2), 1.0 / 4.0);
    double x216 = x215 * x43;
    double x217 = pow(pow(0.996004 - pow(-x116 - 0.002, 2), 2), 1.0 / 4.0);
    double x218 = x217 * x45;
    double x219 = pow(pow(0.996004 - pow(-x104 - 0.002, 2), 2), 1.0 / 4.0);
    double x220 = x219 * x33;
    double x221 = pow(pow(0.996004 - pow(-x119 - 0.002, 2), 2), 1.0 / 4.0);
    double x222 = x221 * x47;
    double x223 = pow(pow(0.996004 - pow(-x122 - 0.002, 2), 2), 1.0 / 4.0);
    double x224 = x223 * x49;
    double x225 = x125 * x175 * x2;
    double x226 = x127 * x177 * x4;
    double x227 = x129 * x179 * x8;
    double x228 = x10 * x131 * x181;
    double x229 = x12 * x133 * x183;
    double x230 = x135 * x185 * x6;
    double x231 = x137 * x14 * x187;
    double x232 = x139 * x16 * x189;
    double x233 = x141 * x18 * x191;
    double x234 = x145 * x193 * x20;
    double x235 = x147 * x195 * x22;
    double x236 = x149 * x199 * x24;
    double x237 = x151 * x201 * x26;
    double x238 = x0 * x143 * x197;
    double x239 = x153 * x203 * x28;
    double x240 = x155 * x205 * x30;
    double x241 = x157 * x207 * x34;
    double x242 = x159 * x209 * x36;
    double x243 = x161 * x211 * x38;
    double x244 = x163 * x213 * x40;
    double x245 = x167 * x215 * x42;
    double x246 = x169 * x217 * x44;
    double x247 = x171 * x221 * x46;
    double x248 = x173 * x223 * x48;
    double x249 = x165 * x219 * x32;
    Eigen::Matrix<double, 2, 1> output;
    output << a[0] * x1 + a[100] * x3 + a[101] * x52 + a[102] * x126 + a[103] * x176 + a[104] * x225 + a[105] * x5 + a[106] * x55 + a[107] * x128 + a[108] * x178 + a[109] * x226 + a[10] * x7 + a[110] * x9 + a[111] * x58 + a[112] * x130 + a[113] * x180 + a[114] * x227 + a[115] * x11 + a[116] * x61 + a[117] * x132 + a[118] * x182 + a[119] * x228 + a[11] * x64 + a[120] * x13 + a[121] * x67 + a[122] * x134 + a[123] * x184 + a[124] * x229 + a[12] * x136 + a[13] * x186 + a[14] * x230 + a[15] * x15 + a[16] * x70 + a[17] * x138 + a[18] * x188 + a[19] * x231 + a[1] * x73 + a[20] * x17 + a[21] * x76 + a[22] * x140 + a[23] * x190 + a[24] * x232 + a[25] * x19 + a[26] * x79 + a[27] * x142 + a[28] * x192 + a[29] * x233 + a[2] * x144 + a[30] * x21 + a[31] * x82 + a[32] * x146 + a[33] * x194 + a[34] * x234 + a[35] * x23 + a[36] * x85 + a[37] * x148 + a[38] * x196 + a[39] * x235 + a[3] * x198 + a[40] * x25 + a[41] * x88 + a[42] * x150 + a[43] * x200 + a[44] * x236 + a[45] * x27 + a[46] * x91 + a[47] * x152 + a[48] * x202 + a[49] * x237 + a[4] * x238 + a[50] * x29 + a[51] * x94 + a[52] * x154 + a[53] * x204 + a[54] * x239 + a[55] * x31 + a[56] * x97 + a[57] * x156 + a[58] * x206 + a[59] * x240 + a[5] * x33 + a[60] * x35 + a[61] * x100 + a[62] * x158 + a[63] * x208 + a[64] * x241 + a[65] * x37 + a[66] * x103 + a[67] * x160 + a[68] * x210 + a[69] * x242 + a[6] * x106 + a[70] * x39 + a[71] * x109 + a[72] * x162 + a[73] * x212 + a[74] * x243 + a[75] * x41 + a[76] * x112 + a[77] * x164 + a[78] * x214 + a[79] * x244 + a[7] * x166 + a[80] * x43 + a[81] * x115 + a[82] * x168 + a[83] * x216 + a[84] * x245 + a[85] * x45 + a[86] * x118 + a[87] * x170 + a[88] * x218 + a[89] * x246 + a[8] * x220 + a[90] * x47 + a[91] * x121 + a[92] * x172 + a[93] * x222 + a[94] * x247 + a[95] * x49 + a[96] * x124 + a[97] * x174 + a[98] * x224 + a[99] * x248 + a[9] * x249, b[0] * x1 + b[100] * x3 + b[101] * x52 + b[102] * x126 + b[103] * x176 + b[104] * x225 + b[105] * x5 + b[106] * x55 + b[107] * x128 + b[108] * x178 + b[109] * x226 + b[10] * x7 + b[110] * x9 + b[111] * x58 + b[112] * x130 + b[113] * x180 + b[114] * x227 + b[115] * x11 + b[116] * x61 + b[117] * x132 + b[118] * x182 + b[119] * x228 + b[11] * x64 + b[120] * x13 + b[121] * x67 + b[122] * x134 + b[123] * x184 + b[124] * x229 + b[12] * x136 + b[13] * x186 + b[14] * x230 + b[15] * x15 + b[16] * x70 + b[17] * x138 + b[18] * x188 + b[19] * x231 + b[1] * x73 + b[20] * x17 + b[21] * x76 + b[22] * x140 + b[23] * x190 + b[24] * x232 + b[25] * x19 + b[26] * x79 + b[27] * x142 + b[28] * x192 + b[29] * x233 + b[2] * x144 + b[30] * x21 + b[31] * x82 + b[32] * x146 + b[33] * x194 + b[34] * x234 + b[35] * x23 + b[36] * x85 + b[37] * x148 + b[38] * x196 + b[39] * x235 + b[3] * x198 + b[40] * x25 + b[41] * x88 + b[42] * x150 + b[43] * x200 + b[44] * x236 + b[45] * x27 + b[46] * x91 + b[47] * x152 + b[48] * x202 + b[49] * x237 + b[4] * x238 + b[50] * x29 + b[51] * x94 + b[52] * x154 + b[53] * x204 + b[54] * x239 + b[55] * x31 + b[56] * x97 + b[57] * x156 + b[58] * x206 + b[59] * x240 + b[5] * x33 + b[60] * x35 + b[61] * x100 + b[62] * x158 + b[63] * x208 + b[64] * x241 + b[65] * x37 + b[66] * x103 + b[67] * x160 + b[68] * x210 + b[69] * x242 + b[6] * x106 + b[70] * x39 + b[71] * x109 + b[72] * x162 + b[73] * x212 + b[74] * x243 + b[75] * x41 + b[76] * x112 + b[77] * x164 + b[78] * x214 + b[79] * x244 + b[7] * x166 + b[80] * x43 + b[81] * x115 + b[82] * x168 + b[83] * x216 + b[84] * x245 + b[85] * x45 + b[86] * x118 + b[87] * x170 + b[88] * x218 + b[89] * x246 + b[8] * x220 + b[90] * x47 + b[91] * x121 + b[92] * x172 + b[93] * x222 + b[94] * x247 + b[95] * x49 + b[96] * x124 + b[97] * x174 + b[98] * x224 + b[99] * x248 + b[9] * x249;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[24], 2);
    double x1 = 2 * p_h[24] - 2 * p_l[24];
    double x2 = -x1;
    double x3 = 1.0 / p_h[24];
    double x4 = -p_l[24] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[24] - p_l[24];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[122] * x8;
    double x10 = 2 * x3;
    double x11 = u[24] * pow(x6, 1.0 / 4.0);
    double x12 = a[121] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[24] * x18;
    double x20 = a[123] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[124] * x23;
    double x25 = a[120] * u[24] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[24], -2);
    double x28 = 2 * p_l[24] * x27;
    double x29 = p_l[24] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[122] * x8;
    double x33 = b[121] * x11;
    double x34 = b[123] * x19;
    double x35 = b[124] * x23;
    double x36 = b[120] * u[24] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[122] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[122] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[122] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[122] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL1_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[23], 2);
    double x1 = 2 * p_h[23] - 2 * p_l[23];
    double x2 = -x1;
    double x3 = 1.0 / p_h[23];
    double x4 = -p_l[23] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[23] - p_l[23];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[117] * x8;
    double x10 = 2 * x3;
    double x11 = u[23] * pow(x6, 1.0 / 4.0);
    double x12 = a[116] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[23] * x18;
    double x20 = a[118] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[119] * x23;
    double x25 = a[115] * u[23] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[23], -2);
    double x28 = 2 * p_l[23] * x27;
    double x29 = p_l[23] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[117] * x8;
    double x33 = b[116] * x11;
    double x34 = b[118] * x19;
    double x35 = b[119] * x23;
    double x36 = b[115] * u[23] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[117] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[117] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[117] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[117] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL2_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[22], 2);
    double x1 = 2 * p_h[22] - 2 * p_l[22];
    double x2 = -x1;
    double x3 = 1.0 / p_h[22];
    double x4 = -p_l[22] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[22] - p_l[22];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[112] * x8;
    double x10 = 2 * x3;
    double x11 = u[22] * pow(x6, 1.0 / 4.0);
    double x12 = a[111] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[22] * x18;
    double x20 = a[113] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[114] * x23;
    double x25 = a[110] * u[22] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[22], -2);
    double x28 = 2 * p_l[22] * x27;
    double x29 = p_l[22] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[112] * x8;
    double x33 = b[111] * x11;
    double x34 = b[113] * x19;
    double x35 = b[114] * x23;
    double x36 = b[110] * u[22] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[112] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[112] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[112] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[112] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL3_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[21], 2);
    double x1 = 2 * p_h[21] - 2 * p_l[21];
    double x2 = -x1;
    double x3 = 1.0 / p_h[21];
    double x4 = -p_l[21] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[21] - p_l[21];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[107] * x8;
    double x10 = 2 * x3;
    double x11 = u[21] * pow(x6, 1.0 / 4.0);
    double x12 = a[106] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[21] * x18;
    double x20 = a[108] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[109] * x23;
    double x25 = a[105] * u[21] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[21], -2);
    double x28 = 2 * p_l[21] * x27;
    double x29 = p_l[21] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[107] * x8;
    double x33 = b[106] * x11;
    double x34 = b[108] * x19;
    double x35 = b[109] * x23;
    double x36 = b[105] * u[21] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[107] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[107] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[107] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[107] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL4_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[20], 2);
    double x1 = 2 * p_h[20] - 2 * p_l[20];
    double x2 = -x1;
    double x3 = 1.0 / p_h[20];
    double x4 = -p_l[20] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[20] - p_l[20];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[102] * x8;
    double x10 = 2 * x3;
    double x11 = u[20] * pow(x6, 1.0 / 4.0);
    double x12 = a[101] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[20] * x18;
    double x20 = a[103] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[104] * x23;
    double x25 = a[100] * u[20] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[20], -2);
    double x28 = 2 * p_l[20] * x27;
    double x29 = p_l[20] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[102] * x8;
    double x33 = b[101] * x11;
    double x34 = b[103] * x19;
    double x35 = b[104] * x23;
    double x36 = b[100] * u[20] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[102] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[102] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[102] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[102] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL5_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[19], 2);
    double x1 = 2 * p_h[19] - 2 * p_l[19];
    double x2 = -x1;
    double x3 = 1.0 / p_h[19];
    double x4 = -p_l[19] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[19] - p_l[19];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[97] * x8;
    double x10 = 2 * x3;
    double x11 = u[19] * pow(x6, 1.0 / 4.0);
    double x12 = a[96] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[19] * x18;
    double x20 = a[98] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[99] * x23;
    double x25 = a[95] * u[19] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[19], -2);
    double x28 = 2 * p_l[19] * x27;
    double x29 = p_l[19] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[97] * x8;
    double x33 = b[96] * x11;
    double x34 = b[98] * x19;
    double x35 = b[99] * x23;
    double x36 = b[95] * u[19] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[97] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[97] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[97] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[97] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL6_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[18], 2);
    double x1 = 2 * p_h[18] - 2 * p_l[18];
    double x2 = -x1;
    double x3 = 1.0 / p_h[18];
    double x4 = -p_l[18] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[18] - p_l[18];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[92] * x8;
    double x10 = 2 * x3;
    double x11 = u[18] * pow(x6, 1.0 / 4.0);
    double x12 = a[91] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[18] * x18;
    double x20 = a[93] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[94] * x23;
    double x25 = a[90] * u[18] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[18], -2);
    double x28 = 2 * p_l[18] * x27;
    double x29 = p_l[18] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[92] * x8;
    double x33 = b[91] * x11;
    double x34 = b[93] * x19;
    double x35 = b[94] * x23;
    double x36 = b[90] * u[18] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[92] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[92] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[92] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[92] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL7_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[17], 2);
    double x1 = 2 * p_h[17] - 2 * p_l[17];
    double x2 = -x1;
    double x3 = 1.0 / p_h[17];
    double x4 = -p_l[17] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[17] - p_l[17];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[87] * x8;
    double x10 = 2 * x3;
    double x11 = u[17] * pow(x6, 1.0 / 4.0);
    double x12 = a[86] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[17] * x18;
    double x20 = a[88] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[89] * x23;
    double x25 = a[85] * u[17] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[17], -2);
    double x28 = 2 * p_l[17] * x27;
    double x29 = p_l[17] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[87] * x8;
    double x33 = b[86] * x11;
    double x34 = b[88] * x19;
    double x35 = b[89] * x23;
    double x36 = b[85] * u[17] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[87] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[87] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[87] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[87] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxL8_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = pow(u[16], 2);
    double x1 = 2 * p_h[16] - 2 * p_l[16];
    double x2 = -x1;
    double x3 = 1.0 / p_h[16];
    double x4 = -p_l[16] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = p_h[16] - p_l[16];
    double x8 = x0 * x5 * pow(x7, 2);
    double x9 = a[82] * x8;
    double x10 = 2 * x3;
    double x11 = u[16] * pow(x6, 1.0 / 4.0);
    double x12 = a[81] * x11;
    double x13 = x3 * x7;
    double x14 = (1.0 / 2.0) / x5;
    double x15 = x13 * x14;
    double x16 = -x4 - 0.002;
    double x17 = 0.996004 - pow(x16, 2);
    double x18 = pow(pow(x17, 2), 1.0 / 4.0);
    double x19 = u[16] * x18;
    double x20 = a[83] * x19;
    double x21 = x16 / x17;
    double x22 = x13 * x21;
    double x23 = x0 * x18;
    double x24 = a[84] * x23;
    double x25 = a[80] * u[16] + x12 + x20 + x24;
    double x26 = x0 * x6;
    double x27 = pow(p_h[16], -2);
    double x28 = 2 * p_l[16] * x27;
    double x29 = p_l[16] * x27 * x7;
    double x30 = x14 * x29;
    double x31 = x21 * x29;
    double x32 = b[82] * x8;
    double x33 = b[81] * x11;
    double x34 = b[83] * x19;
    double x35 = b[84] * x23;
    double x36 = b[80] * u[16] + x33 + x34 + x35;
    Eigen::Matrix<double, 2, 2> output;
    output << a[82] * x0 * x2 * x6 - x10 * x9 - x12 * x15 - x20 * x22 - x22 * x24 - x25, a[82] * x1 * x26 + x12 * x30 + x20 * x31 + x24 * x31 + x25 + x28 * x9, b[82] * x0 * x2 * x6 - x10 * x32 - x15 * x33 - x22 * x34 - x22 * x35 - x36, b[82] * x1 * x26 + x28 * x32 + x30 * x33 + x31 * x34 + x31 * x35 + x36;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[24];
    double x1 = 2 * p_h[24] - x0;
    double x2 = pow(u[24], 2);
    double x3 = 1.0 / p_h[24];
    double x4 = -p_l[24] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[24] - p_l[24];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[122] * x9;
    double x11 = pow(p_h[24], -2);
    double x12 = x0 * x11;
    double x13 = u[24] * pow(x6, 1.0 / 4.0);
    double x14 = a[121] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[24] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[24] * x20;
    double x22 = a[123] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[124] * x25;
    double x27 = a[120] * u[24] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[122] * x9;
    double x34 = b[121] * x13;
    double x35 = b[123] * x21;
    double x36 = b[124] * x25;
    double x37 = b[120] * u[24] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[122] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[122] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[122] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[122] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH1_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[23];
    double x1 = 2 * p_h[23] - x0;
    double x2 = pow(u[23], 2);
    double x3 = 1.0 / p_h[23];
    double x4 = -p_l[23] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[23] - p_l[23];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[117] * x9;
    double x11 = pow(p_h[23], -2);
    double x12 = x0 * x11;
    double x13 = u[23] * pow(x6, 1.0 / 4.0);
    double x14 = a[116] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[23] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[23] * x20;
    double x22 = a[118] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[119] * x25;
    double x27 = a[115] * u[23] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[117] * x9;
    double x34 = b[116] * x13;
    double x35 = b[118] * x21;
    double x36 = b[119] * x25;
    double x37 = b[115] * u[23] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[117] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[117] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[117] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[117] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH2_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[22];
    double x1 = 2 * p_h[22] - x0;
    double x2 = pow(u[22], 2);
    double x3 = 1.0 / p_h[22];
    double x4 = -p_l[22] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[22] - p_l[22];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[112] * x9;
    double x11 = pow(p_h[22], -2);
    double x12 = x0 * x11;
    double x13 = u[22] * pow(x6, 1.0 / 4.0);
    double x14 = a[111] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[22] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[22] * x20;
    double x22 = a[113] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[114] * x25;
    double x27 = a[110] * u[22] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[112] * x9;
    double x34 = b[111] * x13;
    double x35 = b[113] * x21;
    double x36 = b[114] * x25;
    double x37 = b[110] * u[22] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[112] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[112] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[112] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[112] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH3_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[21];
    double x1 = 2 * p_h[21] - x0;
    double x2 = pow(u[21], 2);
    double x3 = 1.0 / p_h[21];
    double x4 = -p_l[21] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[21] - p_l[21];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[107] * x9;
    double x11 = pow(p_h[21], -2);
    double x12 = x0 * x11;
    double x13 = u[21] * pow(x6, 1.0 / 4.0);
    double x14 = a[106] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[21] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[21] * x20;
    double x22 = a[108] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[109] * x25;
    double x27 = a[105] * u[21] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[107] * x9;
    double x34 = b[106] * x13;
    double x35 = b[108] * x21;
    double x36 = b[109] * x25;
    double x37 = b[105] * u[21] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[107] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[107] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[107] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[107] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH4_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[20];
    double x1 = 2 * p_h[20] - x0;
    double x2 = pow(u[20], 2);
    double x3 = 1.0 / p_h[20];
    double x4 = -p_l[20] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[20] - p_l[20];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[102] * x9;
    double x11 = pow(p_h[20], -2);
    double x12 = x0 * x11;
    double x13 = u[20] * pow(x6, 1.0 / 4.0);
    double x14 = a[101] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[20] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[20] * x20;
    double x22 = a[103] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[104] * x25;
    double x27 = a[100] * u[20] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[102] * x9;
    double x34 = b[101] * x13;
    double x35 = b[103] * x21;
    double x36 = b[104] * x25;
    double x37 = b[100] * u[20] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[102] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[102] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[102] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[102] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH5_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[19];
    double x1 = 2 * p_h[19] - x0;
    double x2 = pow(u[19], 2);
    double x3 = 1.0 / p_h[19];
    double x4 = -p_l[19] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[19] - p_l[19];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[97] * x9;
    double x11 = pow(p_h[19], -2);
    double x12 = x0 * x11;
    double x13 = u[19] * pow(x6, 1.0 / 4.0);
    double x14 = a[96] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[19] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[19] * x20;
    double x22 = a[98] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[99] * x25;
    double x27 = a[95] * u[19] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[97] * x9;
    double x34 = b[96] * x13;
    double x35 = b[98] * x21;
    double x36 = b[99] * x25;
    double x37 = b[95] * u[19] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[97] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[97] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[97] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[97] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH6_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[18];
    double x1 = 2 * p_h[18] - x0;
    double x2 = pow(u[18], 2);
    double x3 = 1.0 / p_h[18];
    double x4 = -p_l[18] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[18] - p_l[18];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[92] * x9;
    double x11 = pow(p_h[18], -2);
    double x12 = x0 * x11;
    double x13 = u[18] * pow(x6, 1.0 / 4.0);
    double x14 = a[91] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[18] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[18] * x20;
    double x22 = a[93] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[94] * x25;
    double x27 = a[90] * u[18] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[92] * x9;
    double x34 = b[91] * x13;
    double x35 = b[93] * x21;
    double x36 = b[94] * x25;
    double x37 = b[90] * u[18] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[92] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[92] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[92] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[92] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH7_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[17];
    double x1 = 2 * p_h[17] - x0;
    double x2 = pow(u[17], 2);
    double x3 = 1.0 / p_h[17];
    double x4 = -p_l[17] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[17] - p_l[17];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[87] * x9;
    double x11 = pow(p_h[17], -2);
    double x12 = x0 * x11;
    double x13 = u[17] * pow(x6, 1.0 / 4.0);
    double x14 = a[86] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[17] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[17] * x20;
    double x22 = a[88] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[89] * x25;
    double x27 = a[85] * u[17] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[87] * x9;
    double x34 = b[86] * x13;
    double x35 = b[88] * x21;
    double x36 = b[89] * x25;
    double x37 = b[85] * u[17] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[87] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[87] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[87] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[87] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 2> MPC::Update_dF_dxH8_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = 2 * p_l[16];
    double x1 = 2 * p_h[16] - x0;
    double x2 = pow(u[16], 2);
    double x3 = 1.0 / p_h[16];
    double x4 = -p_l[16] * x3;
    double x5 = x4 + 1;
    double x6 = pow(x5, 2);
    double x7 = x2 * x6;
    double x8 = p_h[16] - p_l[16];
    double x9 = x2 * x5 * pow(x8, 2);
    double x10 = a[82] * x9;
    double x11 = pow(p_h[16], -2);
    double x12 = x0 * x11;
    double x13 = u[16] * pow(x6, 1.0 / 4.0);
    double x14 = a[81] * x13;
    double x15 = (1.0 / 2.0) / x5;
    double x16 = p_l[16] * x11 * x8;
    double x17 = x15 * x16;
    double x18 = -x4 - 0.002;
    double x19 = 0.996004 - pow(x18, 2);
    double x20 = pow(pow(x19, 2), 1.0 / 4.0);
    double x21 = u[16] * x20;
    double x22 = a[83] * x21;
    double x23 = x18 / x19;
    double x24 = x16 * x23;
    double x25 = x2 * x20;
    double x26 = a[84] * x25;
    double x27 = a[80] * u[16] + x14 + x22 + x26;
    double x28 = -x1;
    double x29 = 2 * x3;
    double x30 = x3 * x8;
    double x31 = x15 * x30;
    double x32 = x23 * x30;
    double x33 = b[82] * x9;
    double x34 = b[81] * x13;
    double x35 = b[83] * x21;
    double x36 = b[84] * x25;
    double x37 = b[80] * u[16] + x34 + x35 + x36;
    Eigen::Matrix<double, 2, 2> output;
    output << a[82] * x1 * x7 + x10 * x12 + x14 * x17 + x22 * x24 + x24 * x26 + x27, a[82] * x2 * x28 * x6 - x10 * x29 - x14 * x31 - x22 * x32 - x26 * x32 - x27, b[82] * x1 * x7 + x12 * x33 + x17 * x34 + x24 * x35 + x24 * x36 + x37, b[82] * x2 * x28 * x6 - x29 * x33 - x31 * x34 - x32 * x35 - x32 * x36 - x37;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[24] - p_l[24];
    double x1 = -p_l[24] / p_h[24];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[24];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[120] * x0 + a[121] * x3 + a[122] * x5 + a[123] * x6 + a[124] * x7, b[120] * x0 + b[121] * x3 + b[122] * x5 + b[123] * x6 + b[124] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du1_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[23] - p_l[23];
    double x1 = -p_l[23] / p_h[23];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[23];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[115] * x0 + a[116] * x3 + a[117] * x5 + a[118] * x6 + a[119] * x7, b[115] * x0 + b[116] * x3 + b[117] * x5 + b[118] * x6 + b[119] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du2_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[22] - p_l[22];
    double x1 = -p_l[22] / p_h[22];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[22];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[110] * x0 + a[111] * x3 + a[112] * x5 + a[113] * x6 + a[114] * x7, b[110] * x0 + b[111] * x3 + b[112] * x5 + b[113] * x6 + b[114] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du3_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[21] - p_l[21];
    double x1 = -p_l[21] / p_h[21];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[21];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[105] * x0 + a[106] * x3 + a[107] * x5 + a[108] * x6 + a[109] * x7, b[105] * x0 + b[106] * x3 + b[107] * x5 + b[108] * x6 + b[109] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du4_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[20] - p_l[20];
    double x1 = -p_l[20] / p_h[20];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[20];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[100] * x0 + a[101] * x3 + a[102] * x5 + a[103] * x6 + a[104] * x7, b[100] * x0 + b[101] * x3 + b[102] * x5 + b[103] * x6 + b[104] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du5_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[19] - p_l[19];
    double x1 = -p_l[19] / p_h[19];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[19];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[95] * x0 + a[96] * x3 + a[97] * x5 + a[98] * x6 + a[99] * x7, b[95] * x0 + b[96] * x3 + b[97] * x5 + b[98] * x6 + b[99] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du6_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[18] - p_l[18];
    double x1 = -p_l[18] / p_h[18];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[18];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[90] * x0 + a[91] * x3 + a[92] * x5 + a[93] * x6 + a[94] * x7, b[90] * x0 + b[91] * x3 + b[92] * x5 + b[93] * x6 + b[94] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du7_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[17] - p_l[17];
    double x1 = -p_l[17] / p_h[17];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[17];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[85] * x0 + a[86] * x3 + a[87] * x5 + a[88] * x6 + a[89] * x7, b[85] * x0 + b[86] * x3 + b[87] * x5 + b[88] * x6 + b[89] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du8_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[16] - p_l[16];
    double x1 = -p_l[16] / p_h[16];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[16];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[80] * x0 + a[81] * x3 + a[82] * x5 + a[83] * x6 + a[84] * x7, b[80] * x0 + b[81] * x3 + b[82] * x5 + b[83] * x6 + b[84] * x7;
    return output;
}
Eigen::Matrix<double, 2, 1> MPC::Update_dF_du9_T(const double *p_h, const double *p_l, const double *u, const std::array<double, MPC_STATE_NUM> &a, const std::array<double, MPC_STATE_NUM> &b)
{
    double x0 = p_h[15] - p_l[15];
    double x1 = -p_l[15] / p_h[15];
    double x2 = pow(x1 + 1, 2);
    double x3 = x0 * pow(x2, 1.0 / 4.0);
    double x4 = 2 * u[15];
    double x5 = pow(x0, 2) * x2 * x4;
    double x6 = x0 * pow(pow(0.996004 - pow(-x1 - 0.002, 2), 2), 1.0 / 4.0);
    double x7 = x4 * x6;
    Eigen::Matrix<double, 2, 1> output;
    output << a[75] * x0 + a[76] * x3 + a[77] * x5 + a[78] * x6 + a[79] * x7, b[75] * x0 + b[76] * x3 + b[77] * x5 + b[78] * x6 + b[79] * x7;
    return output;
}
